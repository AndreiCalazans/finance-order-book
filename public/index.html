<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake Trading Pair Order Book</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }
        #orderBook {
            width: 600px;
            border-collapse: collapse;
        }
        #orderBook th, #orderBook td {
            padding: 8px;
            border: 1px solid #ddd;
        }
        #orderBook th {
            background-color: #f2f2f2;
        }
        .buy {
            color: green;
        }
        .sell {
            color: red;
        }
    </style>
    <!-- Include React and ReactDOM from CDN -->
    <script src="https://unpkg.com/react/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel for JSX support -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const OrderBook = () => {
            const [orders, setOrders] = useState([]);

            useEffect(() => {
                const eventSource = new EventSource('/order-book-stream');
                const priceFormatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });
                const amountFormatter = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                eventSource.onmessage = function(event) {
                    const data = JSON.parse(event.data);
                    setOrders(data);
                };

                eventSource.onerror = function(err) {
                    console.error('EventSource failed:', err);
                    eventSource.close();
                };

                return () => {
                    eventSource.close();
                };
            }, []);

            return (
                <table id="orderBook">
                    <thead>
                        <tr>
                            <th>Price</th>
                            <th>Amount</th>
                            <th>Side</th>
                        </tr>
                    </thead>
                    <tbody>
                        {orders.map((order, index) => (
                            <tr key={index}>
                                <td>{new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(order.price)}</td>
                                <td>{new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(order.amount)} units</td>
                                <td className={order.side}>{order.side}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            );
        };

        ReactDOM.render(<OrderBook />, document.getElementById('root'));
    </script>
</body>
</html>

